---
title: "Browse my stuff :3"
permalink: /resources/browse-my-repos
redirect_from:
 - /resources/browse-my-repos/
 - /resources/browse-repos
 - /resources/browse-repos/
 - /resources/browse-ari-repos
 - /resources/browse-ari-repos/
 - /resources/browse-ari
 - /resources/browse-ari/
 - /resources/browse
 - /resources/browse/
 - /browse-my-repos
 - /browse-my-repos/
 - /browse-repos
 - /browse-repos/
 - /browse-ari-repos
 - /browse-ari-repos/
 - /browse-ari
 - /browse-ari/
 - /browse
 - /browse/
 - /uwu
 - /uwu/
layout: default
prism: true
---

<h6 style="cursor: default; font-size: 70%; opacity: .65;">
    <p style="max-width: 50%; text-align: left; float: left;">All done with <a href="https://api.github.com/" target="_blank">GitHub's API</a> (<a href="https://arialhamed.github.io/login">sign-in</a>).</p>
    <p style="max-width: 50%; text-align: right; float: right;" id="current-url-display"></p>
    <div style="clear: both;"></div>
</h6>

<!-- reload        title        back -->
<div style="text-align: center;">
    <p class="title-icons disable-selection" title="Back" style="float: left;" id="browse-back"><svg height="2.5em" class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12l4-4m-4 4 4 4"/></svg></p>
    <p class="title-icons disable-selection" title="Reset" style="float: right;" onclick="browseReset()"><svg height="2.5em" class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.7 7.7A7.1 7.1 0 0 0 5 10.8M18 4v4h-4m-7.7 8.3A7.1 7.1 0 0 0 19 13.2M6 20v-4h4"/></svg></p>
    <h2 id="current-title"></h2>
    <div style="clear: both"></div>
</div>

<!-- description -->
<p id="current-description"></p>

<hr id="cellSeperator">

<input type="search" onkeyup="searchContents()" id="search-box" placeholder="search :3">

<!-- all cells -->
<div class="container wide-responsive">
    <div id="browse-content" class="row"></div>
</div>
<br>

<!-- under the cells, displaying all except images already in cells -->
<div class="container wide-responsive" id="browse-display" style="display: block; text-align: center;">
</div>

<!-- Checked as of 2024 Jan 21, prismjs version is @1.29.0 -->
<script src="https://unpkg.com/prismjs/components/prism-core.min.js"></script>
<script src="https://unpkg.com/prismjs/plugins/toolbar/prism-toolbar.min.js"></script>
<script src="https://unpkg.com/prismjs/plugins/autoloader/prism-autoloader.min.js"></script>
<script src="https://unpkg.com/prismjs/plugins/file-highlight/prism-file-highlight.min.js"></script>
<script src="https://unpkg.com/prismjs/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>
<script src="https://unpkg.com/prismjs/plugins/download-button/prism-download-button.min.js"></script>
<script src="https://unpkg.com/prismjs/plugins/match-braces/prism-match-braces.min.js"></script>
<script src="https://unpkg.com/prismjs/plugins/line-numbers/prism-line-numbers.min.js"></script>
<script src="https://unpkg.com/remarkable/dist/remarkable.min.js"></script>
<style>
.title-icons {
    display: inline; 
    vertical-align: middle; 
    border-radius: .75em; 
    cursor: pointer;
    color: rgba(200,200,255,.75) !important;
}
.title-icons:hover {
    background-color: rgba(0,0,0,.2);
}
#current-url-display {
    overflow: hidden;
    text-overflow: ellipsis;
}
#current-title {
    max-width: 75vw; 
    margin: auto; 
    float: none; 
    text-decoration: underline; 
    background: none!important; 
}
/*#current-title a {color: #fff; }*/
#current-title a:hover {
    color: rgba(200,200,255,.75) !important;
}
#current-title-inner {
    color: white;
    cursor: pointer;
}
#current-title-inner:hover {
    color: rgba(200,200,255,.75);
}
#cud-inner {
    cursor: pointer;
}
#search-box {
    width: 100%;
    background-color: rgba(0,0,0,0.2);
    color: white;
    border-radius: 8px;
    border-width: 0px;
    padding: .2em 0 .3em .5em;
    margin-bottom: 10px;
}
#browse-md-parsed {
    text-align: initial;
    left: clamp(.75rem, calc(50vw - 400px), 24%);
    position: inherit;
    display: block;
    width: min(800px, 98vw - 1.5rem);
    padding: 1rem;
    background-image: url("data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' stroke='grey' stroke-width='2' stroke-dasharray='40%2c 10' stroke-dashoffset='0' stroke-linecap='square'/%3e%3c/svg%3e");
}
/* #browse-display {
    float: none;
    text-align: center;
    padding: 12px 0px;
    margin: auto;
} applied in script */
.browse-cell:hover {
    background-color: #fff2;
}
.browse-cell {
    display: inline-block;
    cursor: pointer;
    margin: 4px;
    color: rgba(200,200,255,.75) !important;
    text-align: center;
    text-decoration: none;
    background-color: #fff1;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
    padding: .375rem .75rem;
    font-size: 1rem;
    transition: color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;
}
.browse-cell * {
    margin: 0 auto;
}
.browse-cell a img {
    max-width: max(10vw, 20vh); 
}
.browse-cell a img + span {
    display: block; 
    max-width: max(10vw, 20vh); 
    word-wrap: anywhere; 
    margin-top: .6em; 
}
</style>
<script>

// Third-party library objects
const mdConverter = new remarkable.Remarkable({html: true}); // Parse markdown text

// GitHub sign-in
async function githubAuth(){
    const state = crypto.randomUUID();
    localStorage.setItem("latestCSRFToken", state);
    window.location.assign(`https://github.com/login/oauth/authorize?client_id=e01ccbd2b58691be1411&response_type=code&scope=repo&redirect_uri=https://arialhamed.github.io/OAuth2&state=${state}`);
}

// Constants
const extensionsVideo = [".webm", ".mp4", ".mov", ".wmv", ".avi", ".flv", ".swf", ".mkv", ".webm"];
const extensionsAudio = [".3gp", ".aa", ".aac", ".aax", ".act", ".aiff", ".alac", ".m4a", ".amr", ".ape", ".au", ".awb", ".dss", ".dvf", ".flac", ".gsm", ".iklax", ".ivs", ".m4b", ".m4p", ".mmf", ".movpkg", ".mp3", ".mpc", ".msv", ".nmf", ".ogg", ".opus", ".ra", ".raw", ".rf64", ".tta", ".voc", ".vox", ".wav", ".wma", ".wv", ".8svx", ".cda", ".oga", ".mogg", ".rm"];
const extensionsArchive = [".7z", ".zip", ".apk", ".apks", ".xapk", ".arc", ".ark", ".jar", ".zpaq", ".zip", ".tar.gz", ".tar.bz2", ".tgz", ".rar", ".wad", ".pk3", ".exe"];
const extensions3D = [".3mf", ".stl", ".glb", ".gltf", ".obj", ".amf"];
const extensionsImage = [".avif", ".gif", ".jpg", ".jpeg", ".jfif", ".pjpeg", ".pjp", ".png", ".svg", ".webp", ".bmp", ".ico", ".cur", ".tif", ".tiff", ".kra", ".jpg_large"];
const extensionsSheet = [".csv", ".tsv", ".xlsx"];
const queryUrl = new URLSearchParams(window.location.search).get("url");
const iconCopy = "<svg height=\"1.5em\" class=\"w-6 h-6 text-gray-800 dark:text-white\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" viewBox=\"0 0 24 24\"><path fill-rule=\"evenodd\" d=\"M18 3a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-1V9a4 4 0 0 0-4-4h-3a2 2 0 0 0-1 .3V5c0-1.1.9-2 2-2h7Z\" clip-rule=\"evenodd\"/><path fill-rule=\"evenodd\" d=\"M8 7v4H4.2c0-.2.2-.3.3-.4l2.4-2.9A2 2 0 0 1 8 7.1Zm2 0v4a2 2 0 0 1-2 2H4v6c0 1.1.9 2 2 2h7a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3Z\" clip-rule=\"evenodd\"/></svg>";

// Browsing control variables
let browsingTree = [];
let isMouseOverAudio = false;

// Kick off when the page loads, or go straight to a stated url
// If there is a query named "url", the page will go to that and extend the browsingTree. fun fact: this is why that's not called browsingHistory :3
if (!queryUrl || String(queryUrl).startsWith("/users/arialhamed/repos?sort=")){
    browseReset();
} else {
    browsingTree.push("https://api.github.com/users/arialhamed/repos?sort=pushed");
    if (queryUrl.split("/contents").length > 1){
        browsingTree.push("https://api.github.com" + queryUrl.split("/contents")[0]);
        let eachClimb = queryUrl.slice(queryUrl.indexOf("/contents/") + 10).split("?")[0].split("/");
        let accumClimb = "";
    for (let i = 0; i < eachClimb.length - 1; i++) {
        accumClimb += "/" + eachClimb[i];
        browsingTree.push("https://api.github.com" + queryUrl.slice(0, queryUrl.indexOf("/contents/")) + "/contents" + accumClimb + queryUrl.slice(queryUrl.indexOf("?ref=")));
    }
        browseRun("https://api.github.com" + queryUrl, "https://api.github.com" + queryUrl.split("/contents")[0]);
    } else {
        browseRun("https://api.github.com" + queryUrl);
    }
}

// Resets the search box
document.getElementById("search-box").value = "";

// The following will get the contents from GitHub API, then add processes it, then loops whatever array there is using browseBuild
async function browseRun(inUrl, rootRepoUrl="") {
    browsingTree.push(inUrl); // Adds current url to a history array
    console.log(browsingTree);

    document.getElementById("browse-content").innerHTML = "";
    document.getElementById("current-url-display").innerHTML = "<span id=\"cud-inner\" onclick=copyCurrentUrl(true) onmouseout=copyCurrentUrl(false) title=\"Copy current URL & position\">" + inUrl.slice(22) + " " + iconCopy + "</span>";

    //const browseResponse = await fetch(inUrl);
    const browseResponse = await fetch(inUrl);
    browseJson = await browseResponse.json();
    if (inUrl.startsWith("https://api.github.com/users/arialhamed/repos")) { // If current link is the start
        document.getElementById("browse-back").style.cursor = "not-allowed"; document.getElementById("browse-back").onclick = "";
        document.getElementById("current-title").innerHTML = "Ari's Public Repositories";
        document.getElementById("current-description").innerHTML = "<span style=\"font-style: italic;\">&lt;description will be shown here when you select a repository below&gt;</span>";

    } else {
        // If repository selected or in contents of repository (not at the start of the page)
        document.getElementById("browse-back").style.cursor = "pointer"; document.getElementById("browse-back").onclick = browseBack;

        // Regarding URL passing (compressed, reason: redundant code)
        let nameDescParentFork=[];if(""===rootRepoUrl)nameDescParentFork=[browseJson.name,browseJson.description,browseJson.fork],browseJson.fork&&nameDescParentFork.push(browseJson.parent.html_url);else{const b=await fetch(rootRepoUrl),c=await b.json();nameDescParentFork=[c.name,c.description,c.fork],c.fork&&nameDescParentFork.push(c.parent.html_url)}

        // If just at the main view of the repository (not in the contents), then set the title and description
        if (!inUrl.includes("?ref=") || rootRepoUrl !== "") {
            document.getElementById("current-description").innerHTML = ([undefined, null, ""].includes(nameDescParentFork[1]))? "<span style=\"font-style: italic;\">No description</span>" : nameDescParentFork[1];
            let currentTitleCommon = "<span id=\"current-title-inner\" onclick=\"window.location = '" + browseJson["html_url"] + "'\" title=\"" + browseJson["html_url"] + "\">" + nameDescParentFork[0] + "</span>";
            document.getElementById("current-title").innerHTML = (nameDescParentFork[2])? currentTitleCommon + " <span style=\"font-size: 60%;\">(<a href=\"" + nameDescParentFork[3] + "\" target=\"_blank\">fork</a>)</span>" : currentTitleCommon;
        }

        // Get contents of repository, and sort it to show directories first
        let repoResponseContent = await fetch((inUrl.includes("?ref="))? inUrl : inUrl+"/contents");
        browseJson = await repoResponseContent.json();
        browseJson.sort((a, b) => a["type"].localeCompare(b["type"]));
    }

    // Loops through each... whatever thing. He needs some milk
    browseJson.forEach(browseBuild);
}


// The following will read each file or content (or repos) and display into the browse-content element
async function browseBuild(eachRecord){
    let contentElement = "<span class=\"col browse-cell\"";
    if (eachRecord["git_url"].startsWith("git://")) { // Is the record from the start?
        // Adds the repository names and the prospective API URLs as cells
        document.getElementById("browse-content").insertAdjacentHTML("beforeend", contentElement + " onclick=browseRun(\"" + eachRecord["url"] + "\")>" + eachRecord["name"]);
    } else {
        // Is the record a directory?
        if (eachRecord["type"] == "dir") {
            contentElement += " onclick=browseRun(\"" + eachRecord["url"] + "\") id=\"" + eachRecord["sha"] + "\">" + eachRecord["name"] + "/ <br><svg height=\"1.2em\" class=\"w-6 h-6 text-gray-800 dark:text-white\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" viewBox=\"0 0 24 24\"><path fill-rule=\"evenodd\" d=\"M3 6c0-1.1.9-2 2-2h5.5a2 2 0 0 1 1.6.7L14 7H3V6Zm0 3v10c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V9H3Z\" clip-rule=\"evenodd\"/></svg>";
        } else {
            // This record is a file in these brackets
            let sizeElement = "<br><span style=\"font-size: 70%; vertical-align: top;\">" + formatBytes(eachRecord["size"]);
            // Is the record an image?
            if (extensionsImage.some(v => eachRecord["download_url"].toLowerCase().endsWith(v))) { 
                contentElement += `><a href=\"` + eachRecord["download_url"] + `\"><img src=\"` + eachRecord["download_url"] + `\" ><span>` + eachRecord["name"] + sizeElement + `</span><span>`;
                // <span style=\"text-overflow: ellipsis; overflow: hidden; display: block; width: 100%;\">` + eachRecord["name"] + sizeElement + `</span>
            } else {
                // `download_url` does not contain encoded text, but `html_url` and `url` has, so i use that (`url` has that "?ref=" thing)
                contentElement += " onclick=showFile(\"" + eachRecord["download_url"].slice(0, eachRecord["download_url"].lastIndexOf('/')) + "/" + eachRecord["html_url"].slice(eachRecord["html_url"].lastIndexOf('/')+1) + "\")>" + eachRecord["name"] + sizeElement;
            }
        }

        // Adds the folders and files as cells
        document.getElementById("browse-content").insertAdjacentHTML("beforeend", contentElement + "</span>");
    }
}

// When click on file, show it. Exceptions for markdown files.
async function showFile(downloadUrl, mdRaw=false){
    console.log("showFile(" + downloadUrl + ")");

    // Builds 2 elements, the first one is the close button, X, and the second one is the name of the file, and also
    let browseDisplayInner = "<a style=\"float: right; cursor: pointer; margin: auto 10px auto 10px; font-size: 200%;\" onclick=\'document.getElementById(\"browse-display\").innerHTML = \"\"; document.getElementById(\"browse-display\").style = \"\"; \'>&#10005;</a><a style=\"font-size: 175%;\" target=\"_blank\" href=\"" + downloadUrl + "\">" + decodeURIComponent(downloadUrl.substring(downloadUrl.lastIndexOf('/')+1)) + "</a>";

    // Building the style of the display element
    let browseDisplayStyle = "float: none; text-align: center; padding: 12px 0; ";

    // Add option to show parsed for markdown files
    if (downloadUrl.toLowerCase().endsWith(".md") && !mdRaw) {browseDisplayInner += " (<a style=\"cursor: pointer;\" onclick=\"showFile(\'" + downloadUrl + "\', true)\">alt: raw</a>)"}
    if (downloadUrl.toLowerCase().endsWith(".md") &&  mdRaw) {browseDisplayInner += " (<a style=\"cursor: pointer;\" onclick=\"showFile(\'" + downloadUrl + "\', false)\">alt: parsed</a>)"}

    // Tie out to give the title some more space
    browseDisplayInner += "<br>";

    // Check if file is video
    if (extensionsVideo.some(v => downloadUrl.toLowerCase().endsWith(v))) {
        browseDisplayInner += "<video id=\"show-video\" style=\"width: 100%;\" controls><source src=\"" + downloadUrl + "\" type=\"video/webm\"></video>";

    // Check if file is audio
    } else if (extensionsAudio.some(v => downloadUrl.toLowerCase().endsWith(v))) {
        browseDisplayInner += "<audio id=\"show-audio\" style=\"width: 100%;\" controls><source src=\"" + downloadUrl + "\" type=\"audio/mpeg\"></audio>";
        browseDisplayStyle += "positon: -webkit-sticky; position: sticky; top: 0px; bottom: 0px; background-color: rgba(0,0,0,.5); width: 80%;";
        // Note the width is 80% here. This is just a lazy way of handling the back-to-top element when in mobile :P

    // Check if file is a 3D object
    } else if (extensions3D.some(v => downloadUrl.toLowerCase().endsWith(v))) {
        browseDisplayInner += "<model-viewer alt=\"" + decodeURIComponent(downloadUrl.substring(downloadUrl.lastIndexOf('/')+1)) + "\" src=\"" + downloadUrl + "\" shadow-intensity=\"1\" camera-controls touch-action=\"pan-y\"></model-viewer>";

    // Check if file is an archive file
    } else if (extensionsArchive.some(v => downloadUrl.toLowerCase().endsWith(v))) {
        browseDisplayInner += "<p>Contents of this file can not be parsed here.</p>";

    // If the file is none of the above, it should be text
    } else {
        const itemTextResponse = await fetch(downloadUrl);
        const itemTextOut = await itemTextResponse.text();

        // If asked to shown parsed (mdRaw = false), and file is markdown, then parse the file contents with Showdown.js and display it
        if (downloadUrl.toLowerCase().endsWith(".md") && !mdRaw) {
            browseDisplayInner += "<br><span id=\"browse-md-parsed\">" + mdConverter.render(itemTextOut.substring(1).split("---").pop()) + "</span>";
        } else { // else show it parsed in Prism.js
            browseDisplayInner += "<br><pre style=\"background-color: #333a;\" data-src=\"" + downloadUrl + "\" data-download-link><code id=\"show-text\" class=\"line-numbers language-" + downloadUrl.split('.').pop() + "\">" + itemTextOut.replace(/\</g, "&lt;") + "</code></pre>";
        } // The code `itemTextOut.replace(/\</g, "&lt;")` replaces all `<` symbols with the escaped version, due to a HTML issue with the pre element
    }

    // Push contents to browse-display's innerHTML
    document.getElementById("browse-display").innerHTML = browseDisplayInner;
    document.getElementById("browse-display").style = browseDisplayStyle;

    // Set volume to half and play the media automatically
    if (document.getElementById("show-video") !== null) {document.getElementById("show-video").volume = .5; document.getElementById("show-video").play()}
    if (document.getElementById("show-text") !== null) {Prism.highlightElement(document.getElementById("show-text"))}
    if (document.getElementById("show-audio") !== null) {document.getElementById("show-audio").volume = .5; document.getElementById("show-audio").play()}
}

// Go back using browsingTree (which is a list)
async function browseBack() {
    console.log("browseBack()");
    browsingTree.pop();
    browseRun(browsingTree.pop());
}

// Reset function
async function browseReset(browseSort = "pushed") {
    console.log("browseReset()");
    browsingTree = [];
    document.getElementById("browse-display").innerHTML = ""; // clear the video/audio/text/etc display
    document.getElementById("search-box").value = ""; // clear search box
    browseRun("https://api.github.com/users/arialhamed/repos?sort=" + browseSort);
}

// Copy the current GitHub API URL
async function copyCurrentUrl(tapState) {
    if (tapState){
        navigator.clipboard.writeText(String(window.location).split("?")[0] + "?url=" + document.getElementById("cud-inner").textContent);
        document.getElementById("cud-inner").innerHTML = "copied to clipboard! <svg class=\"w-6 h-6 text-gray-800 dark:text-white\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" height=\"1.5em\"><path stroke=\"currentColor\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 8v3c0 .6-.4 1-1 1H5m11 4h2c.6 0 1-.4 1-1V5c0-.6-.4-1-1-1h-7a1 1 0 0 0-1 1v1m4 3v10c0 .6-.4 1-1 1H6a1 1 0 0 1-1-1v-7.1c0-.3 0-.5.2-.7l2.5-2.9c.2-.2.5-.3.8-.3H13c.6 0 1 .4 1 1Z\"/></svg>";
    } else {
        document.getElementById("cud-inner").innerHTML = browsingTree.slice(-1)[0].slice(22) + " " + iconCopy;
    }
}

// Search box function, basic stuff frfr
async function searchContents() {
    document.getElementById("browse-content").childNodes.forEach(
        function(a){
            a.style.display = (a.textContent.toLowerCase().includes(document.getElementById("search-box").value.toLowerCase())) ? "" : "none" 
        }
    )
}

</script>



{% include comments.html url=page.url %}