---
title: "Browse me :3"
permalink: /resources/browse-ari
redirect_from:
 - /resources/browse
 - /resources/browse/
 - /browse
 - /browse/
 - /resources/browse-repos
 - /resources/browse-repos/
 - /browse-repos
 - /browse-repos/
 - /resources/browse-ari/
 - /browse-ari
 - /browse-ari/
layout: default
prism: true
---

<h6 style="cursor: default;">
  <p style="float: left;">All done with <a href="https://api.github.com/" target="_blank">GitHub's API</a>.</p>
  <p style="float: right; font-size: 70%; opacity: .3;" id="current-url-display"></p>
  <div style="clear: both;"></div>
</h6>

<div style="text-align: center; font-size: 200%;">
  <p class="disable-selection" style="float: left;"><a id="browse-back">&#x1F850;</a></p>
  <p class="disable-selection" style="float: right;"><a style="cursor: pointer;" onclick="browseReset()">&#x27F3;</a></p>
  <h2 id="currentName" style="float: none; text-decoration: underline;"></h2>
  <div style="clear: both"></div>
</div>


<p id="currentDescription"></p>

<hr >

<!-- row-cols-md-4 row-cols-sm-2 -->
<div class="container">
  <div id="browse-content" class="row"></div>
</div>

<div class="container" id="browse-display" style="display: block; text-align: center;">
</div>

<script src="https://unpkg.com/prismjs@1.29.0/components/prism-core.min.js"></script>
<script src="https://unpkg.com/prismjs@1.29.0/plugins/toolbar/prism-toolbar.min.js"></script>
<script src="https://unpkg.com/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
<script src="https://unpkg.com/prismjs@1.29.0/plugins/file-highlight/prism-file-highlight.min.js"></script>
<script src="https://unpkg.com/prismjs@1.29.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>
<script src="https://unpkg.com/prismjs@1.29.0/plugins/download-button/prism-download-button.min.js"></script>
<script src="https://unpkg.com/prismjs@1.29.0/plugins/match-braces/prism-match-braces.min.js"></script>
<script src="https://unpkg.com/prismjs@1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
<script src="https://unpkg.com/showdown/dist/showdown.min.js"></script>
<script>
function slugify(e){return String(e).normalize("NFKD").replace(/[\u0300-\u036f]/g,"").trim().toLowerCase().replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}

// Third-party library objects
const mdConverter = new showdown.Converter();

// Constants
const extensionsVideo = [".webm", ".mp4", ".mov", ".wmv", ".avi", ".flv", ".swf", ".mkv", ".webm"];
const extensionsAudio = [".3gp", ".aa", ".aac", ".aax", ".act", ".aiff", ".alac", ".m4a", ".amr", ".ape", ".au", ".awb", ".dss", ".dvf", ".flac", ".gsm", ".iklax", ".ivs", ".m4b", ".m4p", ".mmf", ".movpkg", ".mp3", ".mpc", ".msv", ".nmf", ".ogg", ".opus", ".ra", ".raw", ".rf64", ".tta", ".voc", ".vox", ".wav", ".wma", ".wv", ".8svx", ".cda", ".oga", ".mogg", ".rm"];
const extensionsArchive = [".7z", ".zip", ".apk", ".apks", ".xapk", ".arc", ".ark", ".jar", ".zpaq", ".zip", ".tar.gz", ".tar.bz2", ".tgz", ".rar", ".wad", ".pk3", ".exe"];

// Browsing control variables
let browsingTree = [];
let isMouseOverAudio = false;

browseReset();
async function browseRun(inUrl) {
  browsingTree.push(inUrl); // Adds current url to a history array
  
  document.getElementById("browse-content").innerHTML = ""; 
  document.getElementById("current-url-display").innerHTML = inUrl;

  const browseResponse = await fetch(inUrl);
  let browseJson = await browseResponse.json();
  if (inUrl.startsWith("https://api.github.com/users/arialhamed/repos")) { // If current link is the start
    document.getElementById("browse-back").style.cursor = "not-allowed"; document.getElementById("browse-back").onclick = "";
    document.getElementById("currentName").innerHTML = "Ari's Public Repositories";
    document.getElementById("currentDescription").innerHTML = "<span style=\"font-style: italic;\">&lt;description will be shown here when you select a repository below&gt;</span>";
  
  } else { // If repository selected or in contents of repository
    document.getElementById("browse-back").style.cursor = "pointer"; document.getElementById("browse-back").onclick = browseBack;
    if (!inUrl.includes("?ref=")) { // If just at the main view of the repository (not in the contents)
      document.getElementById("currentDescription").innerHTML = ([undefined, null, ""].includes(browseJson["description"]))? "<span style=\"font-style: italic;\">No description</span>" : browseJson["description"];
      document.getElementById("currentName").innerHTML = (browseJson["fork"])? browseJson["name"] + " <span style=\"font-size: 60%;\">(<a href=\"" + browseJson["parent"]["html_url"] + "\" target=\"_blank\">fork</a>)</span>" : browseJson["name"];
    }

    // Get contents of repository, and sort it to show directories first
    let repoResponseContent = await fetch((inUrl.includes("?ref="))? inUrl : inUrl+"/contents");
    browseJson = await repoResponseContent.json();
    browseJson.sort((a, b) => a["type"].localeCompare(b["type"])); 
  }
  browseJson.forEach(browseBuild);
}
async function browseBuild(eachRecord){
  let contentElement = "<a class=\"browse col btn btn-outline-dark\" style=\"cursor: pointer; margin: 3px\"";
  if (eachRecord["git_url"].startsWith("git://")) { // Is the record from the start?
    document.getElementById("browse-content").insertAdjacentHTML("beforeend", contentElement + " onclick=browseRun(\"" + eachRecord["url"] + "\")>" + eachRecord["name"] + "</a>");
  } else {
    if (eachRecord["type"] == "dir") { // Is the record a directory?
      contentElement += " onclick=browseRun(\"" + eachRecord["url"] + "\")>" + eachRecord["name"] + "/</a>";
    } else { // Is the record a file?
      if ([".avif", ".gif", ".jpg", ".jpeg", ".jfif", ".pjpeg", ".pjp", ".png", ".svg", ".webp", ".bmp", ".ico", ".cur", ".tif", ".tiff"].some(v => eachRecord["download_url"].toLowerCase().endsWith(v))) { // Is the record an image?
        contentElement += " href=\"" + eachRecord["download_url"] + "\">" + eachRecord["name"] + "<img style=\"width: 100%;\" src=\"" + eachRecord["download_url"] + "\" ></a>";
      } else {
        contentElement += " onclick=showItem(\"" + eachRecord["download_url"] + "\")>" + eachRecord["name"] + "</a>";
      }
    }
    document.getElementById("browse-content").insertAdjacentHTML("beforeend", contentElement);
  }
}

// When click on file, show it. Exceptions for markdown files.
async function showItem(downloadUrl, mdRaw=true){
  console.log("showItem(" + downloadUrl + ")");
  let browseDisplayInner = "<br><a target=\"_blank\" href=\"" + downloadUrl + "\">" + decodeURIComponent(downloadUrl.substring(downloadUrl.lastIndexOf('/')+1)) + "</a>";
  
  // Add option to show parsed for markdown files
  if (downloadUrl.toLowerCase().endsWith(".md") && !mdRaw) {browseDisplayInner += " (<a onclick=\"showItem(\'" + downloadUrl + "\', true)\">raw</a>)"}
  if (downloadUrl.toLowerCase().endsWith(".md") &&  mdRaw) {browseDisplayInner += " (<a onclick=\"showItem(\'" + downloadUrl + "\', false)\">parsed</a>)"}
  
  // Tie out to give the title some space
  browseDisplayInner += "<br>";

  if (extensionsVideo.some(v => downloadUrl.toLowerCase().endsWith(v))) {
    browseDisplayInner += "<video id=\"show-video\" style=\"width: 100%;\" controls><source src=\"" + downloadUrl + "\" type=\"video/webm\"></video>";
  
  } else if (extensionsAudio.some(v => downloadUrl.toLowerCase().endsWith(v))) {
    browseDisplayInner += "<audio id=\"show-audio\" style=\"width: 100%;\" controls><source src=\"" + downloadUrl + "\" type=\"audio/mpeg\"></audio>";
  
  } else if (extensionsArchive.some(v => downloadUrl.toLowerCase().endsWith(v))) {
    browseDisplayInner += "<p>Contents of this file can not be parsed here.</p>";
  
  } else { // If not video, audio or archive file, it should be a text file. Get contents of text and present it. 
    const itemTextResponse = await fetch(downloadUrl);
    const itemTextOut = await itemTextResponse.text();
    
    // If asked to shown parsed (mdRaw = false), and file is markdown, then parse the file contents with Showdown.js and display it
    if (downloadUrl.toLowerCase().endsWith(".md") && !mdRaw) {
      browseDisplayInner += "<br>" + mdConverter.makeHtml(itemTextOut);
    } else { // else show it parsed in Prism.js
      browseDisplayInner += "<br><pre style=\"background-color: #333a;\" data-src=\"" + downloadUrl + "\" data-download-link><code id=\"show-text\" class=\"line-numbers language-" + downloadUrl.split('.').pop() + "\">" + itemTextOut + "</code></pre>";
    }
  }

  document.getElementById("browse-display").innerHTML = browseDisplayInner;

  // Set volume to half and play the media automatically
  if (document.getElementById("show-video") !== null) {document.getElementById("show-video").volume = .5; document.getElementById("show-video").play()}
  if (document.getElementById("show-audio") !== null) {document.getElementById("show-audio").volume = .5; document.getElementById("show-audio").play()}
  if (document.getElementById("show-text") !== null && !downloadUrl.endsWith(".md")) {Prism.highlightElement(document.getElementById("show-text"))}
  
}

async function browseBack() {
  console.log("browseBack()");
  browsingTree.pop();
  browseRun(browsingTree.pop());
}
async function browseReset(browseSort = "pushed") {
  console.log("browseReset()");
  browsingTree = [];
  document.getElementById("browse-display").innerHTML = "";
  browseRun("https://api.github.com/users/arialhamed/repos?sort=" + browseSort);
}

// TODO: Work on scrolling audio when mouse is over the audio or video elements

// async function mouseOverAudio(){
//   console.log("mouseOverAudio()")
// }

// Peripheral controls
// async function volumeControl() {
//   if (isMouseOverAudio){
//     console.log(document.getElementById("show-audio").scrollTop);
//   }
// }

// window.onscroll = function(){volumeControl()}

// onmouseover=\"function(){isMouseOverAudio=true;}\" onmouseout=\"function(){isMouseOverAudio=false;}\"

</script>







{% include comments.html url=page.url %}